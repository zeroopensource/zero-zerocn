{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "env",
  "description": "Constant exposing environment variables",
  "dependencies": [
    "dotenv",
    "dotenv-expand",
    "zod"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "src/registry/new-york/items/env/env.ts",
      "content": "import path from \"node:path\";\nimport { config } from \"dotenv\";\nimport { expand } from \"dotenv-expand\";\nimport { z } from \"zod\";\n\nexpand(\n  config({\n    path: path.resolve(\n      process.cwd(),\n      // biome-ignore lint/style/noProcessEnv: Intentional\n      process.env.NODE_ENV === \"test\" ? \".env.test\" : \".env\"\n    ),\n  })\n);\n\nconst EnvSchema = z\n  .object({\n    NODE_ENV: z.enum([\"development\", \"test\", \"staging\", \"production\"]),\n    PORT: z.coerce.number(),\n    LOG_LEVEL: z.enum([\n      \"fatal\",\n      \"error\",\n      \"warn\",\n      \"info\",\n      \"debug\",\n      \"trace\",\n      \"silent\",\n    ]),\n    DATABASE_URL: z.string(),\n    DATABASE_AUTH_TOKEN: z.string().optional(),\n    BETTER_AUTH_URL: z.string(),\n    BETTER_AUTH_SECRET: z.string(),\n  })\n  .superRefine((input, ctx) => {\n    if (input.NODE_ENV === \"production\" && !input.DATABASE_AUTH_TOKEN) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.invalid_type,\n        expected: \"string\",\n        received: \"undefined\",\n        path: [\"DATABASE_AUTH_TOKEN\"],\n        message: \"Must be set when NODE_ENV is 'production'\",\n      });\n    }\n  });\n\nexport type env = z.infer<typeof EnvSchema>;\n\n// biome-ignore lint/style/noProcessEnv: Intentional\nconst { data, error } = EnvSchema.safeParse(process.env);\n\nif (error) {\n  // biome-ignore lint/suspicious/noConsole: Intentional\n  console.error(\"‚ùå Invalid env:\");\n  // biome-ignore lint/suspicious/noConsole: Intentional\n  console.error(JSON.stringify(error.flatten().fieldErrors, null, 2));\n  process.exit(1);\n}\n\n// biome-ignore lint/style/noNonNullAssertion: Intended\nexport const ENV = data!;\n",
      "type": "registry:lib"
    }
  ],
  "type": "registry:component"
}